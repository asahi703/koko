<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チャット画面</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="stylesheet" href="styeChat.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<div class="main-content">
  <div class="left-panel">
    <button class="btn">複数に送る</button>
    <button class="btn">テンプレート一覧</button>
    <div class="user-list" id="userList">
      <!-- JSでユーザーを動的に生成 -->
    </div>
  </div>
  <div class="chat-area">
    <!-- 検索バー（左寄せテキスト） -->
    <form class="w-75 mt-4">
      <div class="input-group rounded-pill bg-light px-3 py-1" style="height: 45px;">
        <span class="input-group-text border-0 bg-transparent">
          <i class="fas fa-search text-secondary"></i>
        </span>
        <input type="text" class="form-control border-0 bg-transparent" placeholder="検索" aria-label="検索" id="searchInput">
      </div>
    </form>
    <div class="messages w-100 mt-3"></div>
    <div class="input-bar-wrap w-100">
      <input class="input-bar" type="text" placeholder="コメントを書く..." id="commentInput">
      <button class="send-btn" aria-label="送信" id="sendBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="2 21 23 12 2 3 6 12 2 21"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // 仮のDBデータ
  const users = [
    { name: "葉加瀬太郎" },
    { name: "きよのまさむ" }
    // ここにDBから取得したユーザーを追加
  ];

  function renderUserList(filter = "") {
    const userList = document.getElementById('userList');
    userList.innerHTML = '';
    users
      .filter(user => user.name.includes(filter))
      .forEach(user => {
        const div = document.createElement('div');
        div.className = 'user';
        div.innerHTML = `<div class="avatar"></div><span>${user.name}</span>`;
        userList.appendChild(div);
      });
  }

  document.addEventListener('DOMContentLoaded', function() {
    renderUserList();

    // 検索バーのイベント
    const searchInput = document.getElementById('searchInput');
    if(searchInput){
      searchInput.addEventListener('input', function() {
        renderUserList(searchInput.value);
      });
    }

    // 送信ボタンのイベント
    const sendBtn = document.getElementById('sendBtn');
    const commentInput = document.getElementById('commentInput');
    if(sendBtn && commentInput){
      sendBtn.addEventListener('click', function() {
        alert('送信: ' + commentInput.value);
        commentInput.value = '';
      });
      commentInput.addEventListener('keydown', function(e){
        if(e.key === 'Enter'){
          sendBtn.click();
        }
      });
    }
  });
</script>
</body>
</html>