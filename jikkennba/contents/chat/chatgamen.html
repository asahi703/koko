<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チャット画面</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="stylesheet" href="styleTopsidebar.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    body {
      font-family: "Meiryo", "Noto Sans JP", sans-serif;
      background: #e5e5e5;
    }
    .sidebar {
      width: 100px;
      background: #867FEA;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px;
      border-right: 1.5px solid #5c5c8a;
      min-height: 100vh;
    }
    .sidebar-content {
      padding-left: 0;
      width: 100%;
    }
    .sidebar .nav-link {
      width: 100%;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #fff;
      border-radius: 16px;
      margin-bottom: 24px;
      transition: background 0.2s;
      text-decoration: none;
    }
    .sidebar .nav-link.selected,
    .sidebar .nav-link:hover {
      background: #6a63c7;
    }
    .sidebar .icon-img {
      width: 44px;
      height: 44px;
      margin-bottom: 4px;
      display: block;
    }
    .sidebar .nav-label {
      font-size: 15px;
      color: #fff;
      margin-top: 2px;
      font-family: "Noto Sans JP", "Meiryo", sans-serif;
    }
    .main-content {
      display: flex;
      flex: 1;
      background: #e5e5e5;
      margin-left: 100px;
      margin-top: 80px;
      height: calc(100vh - 80px);
    }
    .left-panel {
      width: 260px;
      background: #fff;
      border-right: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      padding-top: 20px;
    }
    .left-panel .btn {
      width: 100%;
      padding: 12px 0;
      border-bottom: 1px solid #ccc;
      text-align: center;
      font-size: 22px;
      background: #fff;
      cursor: pointer;
      outline: none;
      border: none;
    }
    .left-panel .user-list {
      margin-top: 10px;
    }
    .left-panel .user {
      display: flex;
      align-items: center;
      padding: 10px 0 10px 20px;
      font-size: 24px;
      border-bottom: 1px solid #eee;
    }
    .left-panel .user .avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: #d3d3d3;
      margin-right: 16px;
    }
    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 30px 30px 20px 30px;
      background: #d3d3d3;
      position: relative;
      align-items: flex-start;
    }
    .messages {
      flex: 1;
      background: transparent;
      border-radius: 10px;
      margin-bottom: 20px;
      width: 100%;
    }
    .input-bar-wrap {
      width: 100%;
      position: absolute;
      bottom: 20px;
      left: 0;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }
    .input-bar {
      width: 96%;
      height: 38px;
      border-radius: 19px;
      background: #fff;
      border: none;
      padding: 0 20px;
      font-size: 22px;
      outline: none;
      box-sizing: border-box;
    }
    .send-btn {
      background: none;
      border: none;
      position: absolute;
      right: 18px;
      bottom: 2px;
      cursor: pointer;
      padding: 0;
      width: 40px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .send-btn svg {
      width: 32px;
      height: 32px;
    }
    /* ヘッダー用 */
    .navbar {
      background: #867FEA !important;
    }
    .navbar .navbar-brand img {
      width: 50px;
      height: 50px;
      object-fit: contain;
    }
    .navbar .navbar-brand .hd-img {
      margin-right: 16px;
    }
    .navbar .navbar-brand .hd-img:last-child {
      margin-right: 0;
    }
    .navbar.fixed-top {
      z-index: 2000;
    }
  </style>
</head>
<body>
<!--PC時ヘッダー-->
<header class="d-none d-md-flex w-100 navbar navbar-expand-md align-items-center py-md-3 fixed-top">
  <nav class="container d-flex flex-column flex-md-row justify-content-between align-items-center-md">
    <!-- ブランドロゴとタイトル -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="../../img/headerImg/logo.png" style="width: 50px"
           class="hd-img d-inline-block align-top img-fluid" alt="">
      <img src="../../img/headerImg/account.png" style="width: 50px" class="hd-img d-inline-block align-top img-fluid ms-4" alt="">
    </a>
    <!-- メニュー（削除済み） -->
  </nav>
</header>

<!-- サイドバー -->
<nav class="col-md-3 col-lg-2 d-flex flex-column align-items-center sidebar position-fixed">
  <ul class="nav flex-column sidebar-content">
    <li class="nav-item mb-4 text-center">
      <a class="nav-link p-0 d-flex flex-column align-items-center text-white hover-bg-dark" href="#">
        <img src="../../img/sidebarImg/notifications.png" class="icon-img img-fluid" width="50" alt="...">
        <span class="nav-label">通知</span>
      </a>
    </li>
    <li class="nav-item mb-4 text-center">
      <a class="nav-link p-0 d-flex flex-column align-items-center text-white hover-bg-dark" href="#">
        <img src="../../img/sidebarImg/chat.png" class="icon-img img-fluid" width="50" alt="...">
        <span class="nav-label">チャット</span>
      </a>
    </li>
    <li class="nav-item mb-4 text-center">
      <a class="nav-link p-0 d-flex flex-column align-items-center text-white hover-bg-dark" href="#">
        <img src="../../img/sidebarImg/community.png" class="icon-img img-fluid" width="50" alt="...">
        <span class="nav-label">コミュニティ</span>
      </a>
    </li>
    <li class="nav-item text-center">
      <a class="nav-link p-0 d-flex flex-column align-items-center text-white hover-bg-dark" href="#">
        <img src="../../img/sidebarImg/FAQ.png" class="icon-img img-fluid" width="50" alt="...">
        <span class="nav-label">よくある質問</span>
      </a>
    </li>
  </ul>
</nav>

<div class="main-content">
  <div class="left-panel">
    <button class="btn">複数に送る</button>
    <button class="btn">テンプレート一覧</button>
    <div class="user-list" id="userList">
      <!-- JSでユーザーを動的に生成 -->
    </div>
  </div>
  <div class="chat-area">
    <!-- 検索バー（左寄せテキスト） -->
    <form class="w-75 mt-4">
      <div class="input-group rounded-pill bg-light px-3 py-1" style="height: 45px;">
        <span class="input-group-text border-0 bg-transparent">
          <i class="fas fa-search text-secondary"></i>
        </span>
        <input type="text" class="form-control border-0 bg-transparent" placeholder="検索" aria-label="検索" id="searchInput">
      </div>
    </form>
    <div class="messages w-100 mt-3"></div>
    <div class="input-bar-wrap w-100">
      <input class="input-bar" type="text" placeholder="コメントを書く..." id="commentInput">
      <button class="send-btn" aria-label="送信" id="sendBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="2 21 23 12 2 3 6 12 2 21"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // 仮のDBデータ
  const users = [
    { name: "葉加瀬太郎" },
    { name: "きよのまさむ" }
    // ここにDBから取得したユーザーを追加
  ];

  function renderUserList(filter = "") {
    const userList = document.getElementById('userList');
    userList.innerHTML = '';
    users
      .filter(user => user.name.includes(filter))
      .forEach(user => {
        const div = document.createElement('div');
        div.className = 'user';
        div.innerHTML = `<div class="avatar"></div><span>${user.name}</span>`;
        userList.appendChild(div);
      });
  }

  document.addEventListener('DOMContentLoaded', function() {
    renderUserList();

    // 検索バーのイベント
    const searchInput = document.getElementById('searchInput');
    if(searchInput){
      searchInput.addEventListener('input', function() {
        renderUserList(searchInput.value);
      });
    }

    // 送信ボタンのイベント
    const sendBtn = document.getElementById('sendBtn');
    const commentInput = document.getElementById('commentInput');
    if(sendBtn && commentInput){
      sendBtn.addEventListener('click', function() {
        alert('送信: ' + commentInput.value);
        commentInput.value = '';
      });
      commentInput.addEventListener('keydown', function(e){
        if(e.key === 'Enter'){
          sendBtn.click();
        }
      });
    }
  });
</script>
</body>
</html>